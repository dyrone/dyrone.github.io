<!DOCTYPE html>
<html class="no-js" lang="en">
<head>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<meta http-equiv="X-UA-Compatible" content="IE=edge">
	<title>Git CRLF processing and &#39;git add --renormalize&#39; - dyrone&#39;s blog</title>
	<script>(function(d,e){d[e]=d[e].replace("no-js","js");})(document.documentElement,"className");</script>
	<meta name="description" content="">
		<meta property="og:title" content="Git CRLF processing and &#39;git add --renormalize&#39;" />
<meta property="og:description" content="git config core." />
<meta property="og:type" content="article" />
<meta property="og:url" content="https://dyrone.github.io/posts/git-crlf/" /><meta property="article:section" content="posts" />
<meta property="article:published_time" content="2022-09-27T15:39:04+08:00" />
<meta property="article:modified_time" content="2022-09-27T15:39:04+08:00" />


		<meta itemprop="name" content="Git CRLF processing and &#39;git add --renormalize&#39;">
<meta itemprop="description" content="git config core."><meta itemprop="datePublished" content="2022-09-27T15:39:04+08:00" />
<meta itemprop="dateModified" content="2022-09-27T15:39:04+08:00" />
<meta itemprop="wordCount" content="1322">
<meta itemprop="keywords" content="c,git," />
		<meta name="twitter:card" content="summary"/>
<meta name="twitter:title" content="Git CRLF processing and &#39;git add --renormalize&#39;"/>
<meta name="twitter:description" content="git config core."/>

	<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
	<link rel="dns-prefetch" href="//fonts.googleapis.com">
	<link rel="dns-prefetch" href="//fonts.gstatic.com">
	<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Open+Sans:400,400i,700">

	<link rel="stylesheet" href="/css/style.css">
	<link rel="stylesheet" href="/css/custom.css">

	<link rel="shortcut icon" href="/favicon.ico">
		
</head>
<body class="body">
	<div class="container container--outer">
		<header class="header">
	<div class="container header__container">
		
	<div class="logo logo--mixed">
		<a class="logo__link" href="/" title="滕 龙" rel="home">
			<div class="logo__item logo__imagebox">
					<img class="logo__img" src="/img/placeholder.png">
				</div><div class="logo__item logo__text">
					<div class="logo__title">滕 龙</div>
					<div class="logo__tagline">Teng Long</div>
				</div>
		</a>
	</div>
		<div class="divider"></div>
	</div>
</header>
		<div class="wrapper flex">
			<div class="primary">
			
<main class="main" role="main">
	<article class="post">
		<header class="post__header">
			<h1 class="post__title">Git CRLF processing and &#39;git add --renormalize&#39;</h1>
			<div class="post__meta meta">
<div class="meta__item-datetime meta__item">
	<svg class="meta__icon icon icon-time" width="16" height="14" viewBox="0 0 30 28"><path d="M15 0C7 0 1 6 1 14s6 14 14 14 14-6 14-14S23 0 15 0zm0 25C9 25 4 20 4 14S9 3 15 3s11 5 11 11-5 11-11 11zm1-18h-2v8.4l6.8 4.4L22 18l-6-3.8V7z"/></svg><time class="meta__text" datetime="2022-09-27T15:39:04&#43;08:00">2022-09-27</time></div></div>
		</header>
		
<div class="post__toc toc">
	<div class="toc__title">Page content</div>
	<div class="toc__menu">
		<nav id="TableOfContents">
  <ul>
    <li><a href="#git-config-coreautocrlf">git config core.autocrlf</a></li>
    <li><a href="#attribute-textauto">Attribute &ldquo;text=auto&rdquo;</a></li>
    <li><a href="#git-add---renormalize">git add &ndash;renormalize</a></li>
  </ul>
</nav>
	</div>
</div><div class="content post__content clearfix">
			<h2 id="git-config-coreautocrlf">git config core.autocrlf</h2>
<p>git config core.autocrlf true</p>
<pre tabindex="0"><code class="language-lang" data-lang="lang">This does not force normalization of text files, but does ensure that text files that you introduce to the repository have their line endings normalized to LF when they are added, and that files that are already normalized in the repository stay normalized.
</code></pre><div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-shell" data-lang="shell">git config core.autocrlf false                                                                    
printf <span style="color:#e6db74">&#34;LINEONE\nLINETWO\nLINETHREE&#34;</span> &gt;LF.txt                                                  
printf <span style="color:#e6db74">&#34;LINEONE\r\nLINETWO\r\nLINETHREE&#34;</span> &gt;CRLF.txt
printf <span style="color:#e6db74">&#34;LINEONE\r\nLINETWO\nLINETHREE&#34;</span>   &gt;CRLF_mix_LF.txt
</code></pre></div><p>Ouput the CRLF.txt:</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-shell" data-lang="shell">cat CRLF.txt  | hexdump -C                                                               
<span style="color:#ae81ff">00000000</span>  4c <span style="color:#ae81ff">49</span> 4e <span style="color:#ae81ff">45</span> 4f 4e <span style="color:#ae81ff">45</span> 0d  0a 4c <span style="color:#ae81ff">49</span> 4e <span style="color:#ae81ff">45</span> <span style="color:#ae81ff">54</span> <span style="color:#ae81ff">57</span> 4f  |LINEONE..LINETWO|                                           
<span style="color:#ae81ff">00000010</span>  0d 0a 4c <span style="color:#ae81ff">49</span> 4e <span style="color:#ae81ff">45</span> <span style="color:#ae81ff">54</span> <span style="color:#ae81ff">48</span>  <span style="color:#ae81ff">52</span> <span style="color:#ae81ff">45</span> <span style="color:#ae81ff">45</span>                 |..LINETHREE|                                                
0000001b 
</code></pre></div><p>I added some debugging information in git, and let&rsquo;s see these three files
content and object info which storing in git.</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-shell" data-lang="shell">➜  dyrone git:<span style="color:#f92672">(</span>master<span style="color:#f92672">)</span> ✗ git add .                                                                                       
<span style="color:#f92672">[</span>add_to_index<span style="color:#f92672">]</span> renormalize: ok                                                                                           
<span style="color:#f92672">[</span>index_path<span style="color:#f92672">][</span>S_IFREG<span style="color:#f92672">]</span> path: CRLF.txt, oid:0000000000000000000000000000000000000000                                       
<span style="color:#f92672">[</span>index_fd<span style="color:#f92672">]</span> after index fd: oid: 9d953959d3ccf2147bddc3bfcc3ef1d445fdec8e                                                 
<span style="color:#f92672">[</span>add_to_index<span style="color:#f92672">]</span> index_path, oid :9d953959d3ccf2147bddc3bfcc3ef1d445fdec8e  is written to odb and set to cached entry      
<span style="color:#f92672">[</span>add_to_index<span style="color:#f92672">]</span> renormalize: ok                                                                                           
<span style="color:#f92672">[</span>index_path<span style="color:#f92672">][</span>S_IFREG<span style="color:#f92672">]</span> path: CRLF_mix_LF.txt, oid:0000000000000000000000000000000000000000                                
<span style="color:#f92672">[</span>index_fd<span style="color:#f92672">]</span> after index fd: oid: 59a5c42c6e69fbb3a7bde1fee3c72653f41d300a                                                 
<span style="color:#f92672">[</span>add_to_index<span style="color:#f92672">]</span> index_path, oid :59a5c42c6e69fbb3a7bde1fee3c72653f41d300a  is written to odb and set to cached entry      
<span style="color:#f92672">[</span>add_to_index<span style="color:#f92672">]</span> renormalize: ok                                                                                           
<span style="color:#f92672">[</span>index_path<span style="color:#f92672">][</span>S_IFREG<span style="color:#f92672">]</span> path: LF.txt, oid:0000000000000000000000000000000000000000                                         
<span style="color:#f92672">[</span>index_fd<span style="color:#f92672">]</span> after index fd: oid: 27aa24b533b95695aa3b6a64350a6909bdba136d                                                 
<span style="color:#f92672">[</span>add_to_index<span style="color:#f92672">]</span> index_path, oid :27aa24b533b95695aa3b6a64350a6909bdba136d  is written to odb and set to cached entry      

➜  dyrone git:<span style="color:#f92672">(</span>master<span style="color:#f92672">)</span> ✗ cat .git/index| hexdump -C                                                                      
<span style="color:#ae81ff">00000000</span>  <span style="color:#ae81ff">44</span> <span style="color:#ae81ff">49</span> <span style="color:#ae81ff">52</span> <span style="color:#ae81ff">43</span> <span style="color:#ae81ff">00</span> <span style="color:#ae81ff">00</span> <span style="color:#ae81ff">00</span> <span style="color:#ae81ff">02</span>  <span style="color:#ae81ff">00</span> <span style="color:#ae81ff">00</span> <span style="color:#ae81ff">00</span> <span style="color:#ae81ff">03</span> <span style="color:#ae81ff">63</span> <span style="color:#ae81ff">31</span> 8f <span style="color:#ae81ff">61</span>  |DIRC........c1.a|                                           
<span style="color:#ae81ff">00000010</span>  <span style="color:#ae81ff">28</span> bf a6 <span style="color:#ae81ff">15</span> <span style="color:#ae81ff">63</span> <span style="color:#ae81ff">31</span> 8f <span style="color:#ae81ff">61</span>  <span style="color:#ae81ff">28</span> bf a6 <span style="color:#ae81ff">15</span> <span style="color:#ae81ff">01</span> <span style="color:#ae81ff">00</span> <span style="color:#ae81ff">00</span> <span style="color:#ae81ff">07</span>  |<span style="color:#f92672">(</span>...c1.a<span style="color:#f92672">(</span>.......|                                           
<span style="color:#ae81ff">00000020</span>  <span style="color:#ae81ff">07</span> <span style="color:#ae81ff">06</span> a0 b1 <span style="color:#ae81ff">00</span> <span style="color:#ae81ff">00</span> <span style="color:#ae81ff">81</span> a4  <span style="color:#ae81ff">00</span> <span style="color:#ae81ff">00</span> <span style="color:#ae81ff">01</span> f5 <span style="color:#ae81ff">00</span> <span style="color:#ae81ff">00</span> <span style="color:#ae81ff">00</span> <span style="color:#ae81ff">14</span>  |................|                                           
<span style="color:#ae81ff">00000030</span>  <span style="color:#ae81ff">00</span> <span style="color:#ae81ff">00</span> <span style="color:#ae81ff">00</span> 1b 9d <span style="color:#ae81ff">95</span> <span style="color:#ae81ff">39</span> <span style="color:#ae81ff">59</span>  d3 cc f2 <span style="color:#ae81ff">14</span> 7b dd c3 bf  |......9Y....<span style="color:#f92672">{</span>...|                                           
<span style="color:#ae81ff">00000040</span>  cc 3e f1 d4 <span style="color:#ae81ff">45</span> fd ec 8e  <span style="color:#ae81ff">00</span> <span style="color:#ae81ff">08</span> <span style="color:#ae81ff">43</span> <span style="color:#ae81ff">52</span> 4c <span style="color:#ae81ff">46</span> 2e <span style="color:#ae81ff">74</span>  |.&gt;..E.....CRLF.t|                                           
<span style="color:#ae81ff">00000050</span>  <span style="color:#ae81ff">78</span> <span style="color:#ae81ff">74</span> <span style="color:#ae81ff">00</span> <span style="color:#ae81ff">00</span> <span style="color:#ae81ff">63</span> <span style="color:#ae81ff">31</span> 8f <span style="color:#ae81ff">67</span>  <span style="color:#ae81ff">04</span> 3f b3 dc <span style="color:#ae81ff">63</span> <span style="color:#ae81ff">31</span> 8f <span style="color:#ae81ff">67</span>  |xt..c1.g.?..c1.g|                                           
<span style="color:#ae81ff">00000060</span>  <span style="color:#ae81ff">04</span> 3f b3 dc <span style="color:#ae81ff">01</span> <span style="color:#ae81ff">00</span> <span style="color:#ae81ff">00</span> <span style="color:#ae81ff">07</span>  <span style="color:#ae81ff">07</span> <span style="color:#ae81ff">06</span> a0 c0 <span style="color:#ae81ff">00</span> <span style="color:#ae81ff">00</span> <span style="color:#ae81ff">81</span> a4  |.?..............|                                           
<span style="color:#ae81ff">00000070</span>  <span style="color:#ae81ff">00</span> <span style="color:#ae81ff">00</span> <span style="color:#ae81ff">01</span> f5 <span style="color:#ae81ff">00</span> <span style="color:#ae81ff">00</span> <span style="color:#ae81ff">00</span> <span style="color:#ae81ff">14</span>  <span style="color:#ae81ff">00</span> <span style="color:#ae81ff">00</span> <span style="color:#ae81ff">00</span> 1a <span style="color:#ae81ff">59</span> a5 c4 2c  |............Y..,|                                           
<span style="color:#ae81ff">00000080</span>  6e <span style="color:#ae81ff">69</span> fb b3 a7 bd e1 fe  e3 c7 <span style="color:#ae81ff">26</span> <span style="color:#ae81ff">53</span> f4 1d <span style="color:#ae81ff">30</span> 0a  |ni........&amp;S..0.|                                           
<span style="color:#ae81ff">00000090</span>  <span style="color:#ae81ff">00</span> 0f <span style="color:#ae81ff">43</span> <span style="color:#ae81ff">52</span> 4c <span style="color:#ae81ff">46</span> 5f 6d  <span style="color:#ae81ff">69</span> <span style="color:#ae81ff">78</span> 5f 4c <span style="color:#ae81ff">46</span> 2e <span style="color:#ae81ff">74</span> <span style="color:#ae81ff">78</span>  |..CRLF_mix_LF.tx|                                           
000000a0  <span style="color:#ae81ff">74</span> <span style="color:#ae81ff">00</span> <span style="color:#ae81ff">00</span> <span style="color:#ae81ff">00</span> <span style="color:#ae81ff">63</span> <span style="color:#ae81ff">31</span> 8f <span style="color:#ae81ff">56</span>  <span style="color:#ae81ff">02</span> ab 2e a6 <span style="color:#ae81ff">63</span> <span style="color:#ae81ff">31</span> 8f <span style="color:#ae81ff">56</span>  |t...c1.V....c1.V|                                           
000000b0  <span style="color:#ae81ff">02</span> ab 2e a6 <span style="color:#ae81ff">01</span> <span style="color:#ae81ff">00</span> <span style="color:#ae81ff">00</span> <span style="color:#ae81ff">07</span>  <span style="color:#ae81ff">07</span> <span style="color:#ae81ff">06</span> a0 <span style="color:#ae81ff">90</span> <span style="color:#ae81ff">00</span> <span style="color:#ae81ff">00</span> <span style="color:#ae81ff">81</span> a4  |................|                                           
000000c0  <span style="color:#ae81ff">00</span> <span style="color:#ae81ff">00</span> <span style="color:#ae81ff">01</span> f5 <span style="color:#ae81ff">00</span> <span style="color:#ae81ff">00</span> <span style="color:#ae81ff">00</span> <span style="color:#ae81ff">14</span>  <span style="color:#ae81ff">00</span> <span style="color:#ae81ff">00</span> <span style="color:#ae81ff">00</span> <span style="color:#ae81ff">19</span> <span style="color:#ae81ff">27</span> aa <span style="color:#ae81ff">24</span> b5  |............<span style="color:#960050;background-color:#1e0010">&#39;</span>.$.|                                           
000000d0  <span style="color:#ae81ff">33</span> b9 <span style="color:#ae81ff">56</span> <span style="color:#ae81ff">95</span> aa 3b 6a <span style="color:#ae81ff">64</span>  <span style="color:#ae81ff">35</span> 0a <span style="color:#ae81ff">69</span> <span style="color:#ae81ff">09</span> bd ba <span style="color:#ae81ff">13</span> 6d  |3.V..;jd5.i....m|                                           
000000e0  <span style="color:#ae81ff">00</span> <span style="color:#ae81ff">06</span> 4c <span style="color:#ae81ff">46</span> 2e <span style="color:#ae81ff">74</span> <span style="color:#ae81ff">78</span> <span style="color:#ae81ff">74</span>  <span style="color:#ae81ff">00</span> <span style="color:#ae81ff">00</span> <span style="color:#ae81ff">00</span> <span style="color:#ae81ff">00</span> <span style="color:#ae81ff">08</span> <span style="color:#ae81ff">09</span> <span style="color:#ae81ff">63</span> <span style="color:#ae81ff">33</span>  |..LF.txt......c3|                                           
000000f0  e9 <span style="color:#ae81ff">73</span> e8 e5 be <span style="color:#ae81ff">78</span> <span style="color:#ae81ff">69</span> a9  f8 <span style="color:#ae81ff">32</span> 0c <span style="color:#ae81ff">77</span> <span style="color:#ae81ff">60</span> be <span style="color:#ae81ff">42</span> bc  |.s...xi..2.w<span style="color:#e6db74">`</span>.B.|                                           
<span style="color:#ae81ff">00000100</span>   
</code></pre></div><p>We can grab the key informations in above outputs. When we close the config <code>git config core.autocrlf</code>, we can see that there are 3 actually different BLOBs that
be written into INDEX. They are :</p>
<ul>
<li>9d953959d3ccf2147bddc3bfcc3ef1d445fdec8e</li>
<li>59a5c42c6e69fbb3a7bde1fee3c72653f41d300a</li>
<li>27aa24b533b95695aa3b6a64350a6909bdba136d</li>
</ul>
<p>That is because git is not let &ldquo;autocrlf&rdquo; happen now, git will record the
original file content as the BLOB, because of the type and number of newlines,
they vary from BLOB to BLOB.</p>
<h2 id="attribute-textauto">Attribute &ldquo;text=auto&rdquo;</h2>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-shell" data-lang="shell">echo <span style="color:#e6db74">&#34;*.txt text=auto&#34;</span> &gt;.gitattributes
</code></pre></div><blockquote>
<p>If you want to ensure that text files that any contributor introduces to the
repository have their line endings normalized, you can set the text attribute
to &ldquo;auto&rdquo; for all files.</p>
<p>如果你希望确保写入仓库中的换行符都是经过&quot;规范化的（LF）&quot;, 那么你可以将对应的文
件类型的attribute设置为“auto”来满足这一点。</p>
</blockquote>
<p>我们还可以更加的灵活控制不同文件类型处理换行的不同行为：</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-shell" data-lang="shell">*   text<span style="color:#f92672">=</span>auto
*.txt		text
*.vcproj	text eol<span style="color:#f92672">=</span>crlf
*.sh		text eol<span style="color:#f92672">=</span>lf
*.jpg		-text
</code></pre></div><p>When we execute the above command &ldquo;*.txt text=auto&rdquo; to modify the corresponding
attributes, it is equivalent to requiring git to &ldquo;normalize (all convert to LF)
the text objects that are subsequently written to the warehouse.</p>
<p>当我们执行了上面的命令&rdquo;*.txt text=auto&quot;修改了对应的属性后，等同于我们要求git对于
后续写入仓库的文本对象，都进行“规范化（均转化为LF）。</p>
<h2 id="git-add---renormalize">git add &ndash;renormalize</h2>
<p>We can use the &ldquo;&ndash;renormalize&rdquo; parameter of the &ldquo;add&rdquo; self-command to
re-&ldquo;normalize&rdquo; the text files in the warehouse. For example, in the above
warehouse, among the three files, one is based on CRLF line breaks, and one is
The files are mixed with CRLF and LF, then these two files are actually the
files that need to be &ldquo;renormalized&rdquo;</p>
<p>我们可以使用“add” 自命令的“&ndash;renormalize” 参数来仓库中文本文件进行重新“规范化”，
例如我们针对上述的仓库中的情况，3个文件中，1个文件为基于CRLF换行，1个文件为CRLF
和LF混用，那么这两个文件实际上就是需要被“renormalized” 的文件。</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-shell" data-lang="shell">➜  dyrone git:<span style="color:#f92672">(</span>master<span style="color:#f92672">)</span> ✗ git add --renormalize <span style="color:#e6db74">&#34;*.txt&#34;</span>                                                                                  
<span style="color:#f92672">[</span>index_path<span style="color:#f92672">][</span>S_IFREG<span style="color:#f92672">]</span> path: CRLF.txt, oid:0000000000000000000000000000000000000000                                                      
<span style="color:#f92672">[</span>index_fd<span style="color:#f92672">]</span> after index fd: oid: 27aa24b533b95695aa3b6a64350a6909bdba136d                                                                
<span style="color:#f92672">[</span>add_to_index<span style="color:#f92672">]</span> index_path, oid :27aa24b533b95695aa3b6a64350a6909bdba136d  is written to odb and set to cached entry                     
<span style="color:#f92672">[</span>index_path<span style="color:#f92672">][</span>S_IFREG<span style="color:#f92672">]</span> path: CRLF_mix_LF.txt, oid:0000000000000000000000000000000000000000                                               
<span style="color:#f92672">[</span>index_fd<span style="color:#f92672">]</span> after index fd: oid: 27aa24b533b95695aa3b6a64350a6909bdba136d                                                                
<span style="color:#f92672">[</span>add_to_index<span style="color:#f92672">]</span> index_path, oid :27aa24b533b95695aa3b6a64350a6909bdba136d  is written to odb and set to cached entry                     
<span style="color:#f92672">[</span>index_path<span style="color:#f92672">][</span>S_IFREG<span style="color:#f92672">]</span> path: LF.txt, oid:0000000000000000000000000000000000000000                                                        
<span style="color:#f92672">[</span>index_fd<span style="color:#f92672">]</span> after index fd: oid: 27aa24b533b95695aa3b6a64350a6909bdba136d                                                                
<span style="color:#f92672">[</span>add_to_index<span style="color:#f92672">]</span> index_path, oid :27aa24b533b95695aa3b6a64350a6909bdba136d  is written to odb and set to cached entry                     
➜  dyrone git:<span style="color:#f92672">(</span>master<span style="color:#f92672">)</span> ✗ cat .git/index| hexdump -C                                                                                     
<span style="color:#ae81ff">00000000</span>  <span style="color:#ae81ff">44</span> <span style="color:#ae81ff">49</span> <span style="color:#ae81ff">52</span> <span style="color:#ae81ff">43</span> <span style="color:#ae81ff">00</span> <span style="color:#ae81ff">00</span> <span style="color:#ae81ff">00</span> <span style="color:#ae81ff">02</span>  <span style="color:#ae81ff">00</span> <span style="color:#ae81ff">00</span> <span style="color:#ae81ff">00</span> <span style="color:#ae81ff">03</span> <span style="color:#ae81ff">63</span> <span style="color:#ae81ff">31</span> 8f <span style="color:#ae81ff">61</span>  |DIRC........c1.a|                                                          
<span style="color:#ae81ff">00000010</span>  <span style="color:#ae81ff">28</span> bf a6 <span style="color:#ae81ff">15</span> <span style="color:#ae81ff">63</span> <span style="color:#ae81ff">31</span> 8f <span style="color:#ae81ff">61</span>  <span style="color:#ae81ff">28</span> bf a6 <span style="color:#ae81ff">15</span> <span style="color:#ae81ff">01</span> <span style="color:#ae81ff">00</span> <span style="color:#ae81ff">00</span> <span style="color:#ae81ff">07</span>  |<span style="color:#f92672">(</span>...c1.a<span style="color:#f92672">(</span>.......|                                                          
<span style="color:#ae81ff">00000020</span>  <span style="color:#ae81ff">07</span> <span style="color:#ae81ff">06</span> a0 b1 <span style="color:#ae81ff">00</span> <span style="color:#ae81ff">00</span> <span style="color:#ae81ff">81</span> a4  <span style="color:#ae81ff">00</span> <span style="color:#ae81ff">00</span> <span style="color:#ae81ff">01</span> f5 <span style="color:#ae81ff">00</span> <span style="color:#ae81ff">00</span> <span style="color:#ae81ff">00</span> <span style="color:#ae81ff">14</span>  |................|                                                          
<span style="color:#ae81ff">00000030</span>  <span style="color:#ae81ff">00</span> <span style="color:#ae81ff">00</span> <span style="color:#ae81ff">00</span> 1b <span style="color:#ae81ff">27</span> aa <span style="color:#ae81ff">24</span> b5  <span style="color:#ae81ff">33</span> b9 <span style="color:#ae81ff">56</span> <span style="color:#ae81ff">95</span> aa 3b 6a <span style="color:#ae81ff">64</span>  |....<span style="color:#e6db74">&#39;.$.3.V..;jd|                                                          
</span><span style="color:#e6db74">00000040  35 0a 69 09 bd ba 13 6d  00 08 43 52 4c 46 2e 74  |5.i....m..CRLF.t|                                                          
</span><span style="color:#e6db74">00000050  78 74 00 00 63 31 8f 67  04 3f b3 dc 63 31 8f 67  |xt..c1.g.?..c1.g|                                                          
</span><span style="color:#e6db74">00000060  04 3f b3 dc 01 00 00 07  07 06 a0 c0 00 00 81 a4  |.?..............|                                                          
</span><span style="color:#e6db74">00000070  00 00 01 f5 00 00 00 14  00 00 00 1a 27 aa 24 b5  |............&#39;</span>.$.|                                                          
<span style="color:#ae81ff">00000080</span>  <span style="color:#ae81ff">33</span> b9 <span style="color:#ae81ff">56</span> <span style="color:#ae81ff">95</span> aa 3b 6a <span style="color:#ae81ff">64</span>  <span style="color:#ae81ff">35</span> 0a <span style="color:#ae81ff">69</span> <span style="color:#ae81ff">09</span> bd ba <span style="color:#ae81ff">13</span> 6d  |3.V..;jd5.i....m|                                                          
<span style="color:#ae81ff">00000090</span>  <span style="color:#ae81ff">00</span> 0f <span style="color:#ae81ff">43</span> <span style="color:#ae81ff">52</span> 4c <span style="color:#ae81ff">46</span> 5f 6d  <span style="color:#ae81ff">69</span> <span style="color:#ae81ff">78</span> 5f 4c <span style="color:#ae81ff">46</span> 2e <span style="color:#ae81ff">74</span> <span style="color:#ae81ff">78</span>  |..CRLF_mix_LF.tx|                                                          
000000a0  <span style="color:#ae81ff">74</span> <span style="color:#ae81ff">00</span> <span style="color:#ae81ff">00</span> <span style="color:#ae81ff">00</span> <span style="color:#ae81ff">63</span> <span style="color:#ae81ff">31</span> 8f <span style="color:#ae81ff">56</span>  <span style="color:#ae81ff">02</span> ab 2e a6 <span style="color:#ae81ff">63</span> <span style="color:#ae81ff">31</span> 8f <span style="color:#ae81ff">56</span>  |t...c1.V....c1.V|                                                          
000000b0  <span style="color:#ae81ff">02</span> ab 2e a6 <span style="color:#ae81ff">01</span> <span style="color:#ae81ff">00</span> <span style="color:#ae81ff">00</span> <span style="color:#ae81ff">07</span>  <span style="color:#ae81ff">07</span> <span style="color:#ae81ff">06</span> a0 <span style="color:#ae81ff">90</span> <span style="color:#ae81ff">00</span> <span style="color:#ae81ff">00</span> <span style="color:#ae81ff">81</span> a4  |................|                                                          
000000c0  <span style="color:#ae81ff">00</span> <span style="color:#ae81ff">00</span> <span style="color:#ae81ff">01</span> f5 <span style="color:#ae81ff">00</span> <span style="color:#ae81ff">00</span> <span style="color:#ae81ff">00</span> <span style="color:#ae81ff">14</span>  <span style="color:#ae81ff">00</span> <span style="color:#ae81ff">00</span> <span style="color:#ae81ff">00</span> <span style="color:#ae81ff">19</span> <span style="color:#ae81ff">27</span> aa <span style="color:#ae81ff">24</span> b5  |............<span style="color:#960050;background-color:#1e0010">&#39;</span>.$.|                                                          
000000d0  <span style="color:#ae81ff">33</span> b9 <span style="color:#ae81ff">56</span> <span style="color:#ae81ff">95</span> aa 3b 6a <span style="color:#ae81ff">64</span>  <span style="color:#ae81ff">35</span> 0a <span style="color:#ae81ff">69</span> <span style="color:#ae81ff">09</span> bd ba <span style="color:#ae81ff">13</span> 6d  |3.V..;jd5.i....m|                                                          
000000e0  <span style="color:#ae81ff">00</span> <span style="color:#ae81ff">06</span> 4c <span style="color:#ae81ff">46</span> 2e <span style="color:#ae81ff">74</span> <span style="color:#ae81ff">78</span> <span style="color:#ae81ff">74</span>  <span style="color:#ae81ff">00</span> <span style="color:#ae81ff">00</span> <span style="color:#ae81ff">00</span> <span style="color:#ae81ff">00</span> <span style="color:#ae81ff">54</span> <span style="color:#ae81ff">52</span> <span style="color:#ae81ff">45</span> <span style="color:#ae81ff">45</span>  |..LF.txt....TREE|                                                          
000000f0  <span style="color:#ae81ff">00</span> <span style="color:#ae81ff">00</span> <span style="color:#ae81ff">00</span> <span style="color:#ae81ff">06</span> <span style="color:#ae81ff">00</span> 2d <span style="color:#ae81ff">31</span> <span style="color:#ae81ff">20</span>  <span style="color:#ae81ff">30</span> 0a 2c <span style="color:#ae81ff">57</span> b8 <span style="color:#ae81ff">88</span> a3 <span style="color:#ae81ff">06</span>  |.....-1 0.,W....|                                                          
<span style="color:#ae81ff">00000100</span>  fb <span style="color:#ae81ff">28</span> 5f 7a <span style="color:#ae81ff">59</span> 5b b6 <span style="color:#ae81ff">79</span>  <span style="color:#ae81ff">00</span> <span style="color:#ae81ff">18</span> bc <span style="color:#ae81ff">29</span> 1c <span style="color:#ae81ff">98</span>        |.<span style="color:#f92672">(</span>_zY<span style="color:#f92672">[</span>.y...<span style="color:#f92672">)</span>..|                                             
0000010e  

</code></pre></div><p>We can see that &ldquo;&ndash;renormalize&rdquo; re-&ldquo;normalizes&rdquo; the txt files in our workspace,
which turns all three files in the repository into LF as newlines. Behind this,
it is actually a two-step operation. The first step is to regenerate a new BLOB
object, and the second step is to write INDEX.</p>
<p>We can see from the output that when the renormalization is completed, the BLOBs
of the three files have become the same object
27aa24b533b95695aa3b6a64350a6909bdba136d, and at this time we can see that the
HASH of the three BLOB objects in INDEX have also been unified to
27aa24b533b95695aa3b6a64350a6909bdba136d .</p>
<p>But it should be noted that although the contents of the three files stored in
the git repository are exactly the same, the filesize of the three files in the
actual INDEX are still different, because the entry in INDEX represents the file
in the workspace and the file in git The mapping between the stored objects,
although the BLOB stored in git is unified after renormalization, the file
stat() stored in the local workspace has not actually changed.</p>
<p>我们可以看到， &ldquo;&ndash;renormalize&rdquo; 让我们workspace中的txt文件进行重新“规范化”, 这让
仓库中的三个文件全部变为LF作为换行符。这背后，其实是两步的操作，第一步是重新生成
新的BLOB对象，第二步写入INDEX。</p>
<p>我们可以从输出中看到， 当重新规范化执行结束之后，三个文件的BLOB已经变成了同一个
对象27aa24b533b95695aa3b6a64350a6909bdba136d, 而此时我们可以看到INDEX中的三个
BLOB对象的HASH也都已经统一为27aa24b533b95695aa3b6a64350a6909bdba136d.</p>
<p>但是需要注意的一点是，虽然三个文件在git仓库中存储的内容是完全一致，但是实际 上
INDEX中三个文件的filesize还是不同的，因为INDEX中entry代表的是工作空间中的文件与
git中存储的对象之间的映射，虽然renormalize后， git中存储的BLOB得到了统一，但是实
际上存储在本地工作空间中的文件stat()并没有发生变化。</p>

		</div>
		<footer class="post__footer">
			
<div class="post__tags tags clearfix">
	<svg class="tags__badge icon icon-tag" width="16" height="16" viewBox="0 0 32 32"><path d="M32 19c0 1-1 2-1 2L21 31s-1 1-2 1-2-1-2-1L2 16c-1-1-1.4-2-1.4-2S0 12.5 0 11V3C0 1.5.8.8.8.8S1.5 0 3 0h8c1.5 0 3 .6 3 .6S15 1 16 2l15 15s1 1 1 2zM7 10a3 3 0 1 0 0-6 3 3 0 0 0 0 6z"/></svg>
	<ul class="tags__list">
		<li class="tags__item">
			<a class="tags__link btn" href="/tags/c/" rel="tag">c</a>
		</li>
		<li class="tags__item">
			<a class="tags__link btn" href="/tags/git/" rel="tag">git</a>
		</li>
	</ul>
</div>
		</footer>
	</article>
</main>


<nav class="pager flex">
	<div class="pager__item pager__item--prev">
		<a class="pager__link" href="/posts/git-add/" rel="prev">
			<span class="pager__subtitle">«&thinsp;Previous</span>
			<p class="pager__title">About &#39;git add&#39;</p>
		</a>
	</div>
	<div class="pager__item pager__item--next">
		<a class="pager__link" href="/posts/git-notes/" rel="next">
			<span class="pager__subtitle">Next&thinsp;»</span>
			<p class="pager__title">Git Notes(to be continued...)</p>
		</a>
	</div>
</nav>


			</div>
			
		</div>
		<footer class="footer">
	<div class="container footer__container flex">
		
		<div class="footer__copyright">
			&copy; 2023 dyrone.
			<span class="footer__copyright-credits">Generated with <a href="https://gohugo.io/" rel="nofollow noopener" target="_blank">Hugo</a> and <a href="https://github.com/Vimux/Mainroad/" rel="nofollow noopener" target="_blank">Mainroad</a> theme.</span>
		</div>
	</div>
</footer>
	</div>
<script async defer src="/js/menu.js"></script>
<script src="/js/custom.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.6/MathJax.js?config=TeX-AMS-MML_HTMLorMML" async></script>
</body>
</html>