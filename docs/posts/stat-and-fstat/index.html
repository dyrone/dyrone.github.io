<!doctype html>
<html lang="en-us">

  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
    <title> stat and fstat - Dyrone Teng </title>
    <meta name="HandheldFriendly" content="True">
    <meta name="MobileOptimized" content="320">
    <meta name="referrer" content="no-referrer">
    <meta property="og:site_name" content="Dyrone Teng" />
    <meta property="og:locale" content="en_US" />

    <meta property="og:title" content="stat and fstat" />
<meta property="og:description" content="stat stat() retrieve information about the file pointed to by pathname;
lstat lstat() is identical to stat(), except that if pathname is a symbolic link, then it returns information about the link itself, not the file that the link refers to.
fstat stat() is identical to stat(), except that the file about which information is to be retrieved is specified by the file descriptor fd.
fstat and stat If &ldquo;stat()&rdquo; could return the information about the file too, why we still need to first call &ldquo;open()&rdquo; to make a FD then use fstat?" />
<meta property="og:type" content="article" />
<meta property="og:url" content="/posts/stat-and-fstat/" /><meta property="article:section" content="posts" />
<meta property="article:published_time" content="2022-07-24T23:11:16+08:00" />
<meta property="article:modified_time" content="2022-07-24T23:11:16+08:00" />



    <meta name="twitter:card" content="summary_large_image" />
    
    <meta name="twitter:title" content="stat and fstat" />
    <meta name="twitter:description" content="" />
    

    <meta name="twitter:image" content="" />
    <link rel="canonical" href="/posts/stat-and-fstat/">
    
    <link rel="stylesheet" href="/css/site.min.css" />
    <link rel="stylesheet" href="css/custom.css" />

    
    
    <link href="/index.xml" rel="alternate" type="application/rss+xml" title="Dyrone Teng" />
    
  </head>

  <body>
    
<div class="mt-xl header">
  <header>
    <div class="container">
      <div class="row justify-content-center">
	<div class="col-auto">
	  <a href="" style="display: contents">
	    <h1 class="name text-center">Teng Long Is Dyrone</h1>
	  </a>
	</div>
      </div>
      <div class="row justify-content-center">
	<div class="nav justify-content-center">
	  <ul>
	    
	    <li class="nav-item justify-content-center mx-auto"> 
	      <a class="nav-link" href="/">
		
		Home
	      </a>
	    </li>
	    
	    <li class="nav-item justify-content-center mx-auto"> 
	      <a class="nav-link" href="/posts/introduce/index.html">
		
		About
	      </a>
	    </li>
	    
	    
	  </ul>
	</div>
      </div>
    </div>
  </header>
</div>

<div class="content">
  <div class="container">
    <div class="row justify-content-center">
      <div class="col-sm-12 col-lg-8">
        <h1 class="mx-0 mx-md-4 single-page-title">stat and fstat</h1>
        <div class="markdown page-content">
          <h2 id="stat">stat</h2>
<p>stat() retrieve information about the file pointed to by pathname;</p>
<h2 id="lstat">lstat</h2>
<p>lstat() is identical to stat(), except that if pathname is a
symbolic link, then it returns information about the link itself,
not the file that the link refers to.</p>
<h2 id="fstat">fstat</h2>
<p>stat() is identical to stat(), except that the file about which
information is to be retrieved is specified by the file
descriptor fd.</p>
<h2 id="fstat-and-stat">fstat and stat</h2>
<p>If &ldquo;stat()&rdquo; could return the information about the file too, why we still need
to first call &ldquo;open()&rdquo; to make a FD then use fstat?</p>
<p>The main reason is security, if you first &ldquo;stat()&rdquo; the file and then &ldquo;open()&rdquo;
it, there is a small window of time in between where the file could have been
modified or had its permissions changed, or replaced by a symlink. You can
understand its a READ but not EXCLUSIVE operation.</p>
<p>&ldquo;fstat()&rdquo; make it OK in this scence. Because if you call &ldquo;open()&rdquo; first, then
the file can not change by other process now.</p>


        </div>
      </div>
      <div class="container">
  <span class="row justify-content-center meta" id="footer">
    Copyright Â© 2023 Dyrone Teng
  </span>
  <script defer src="js/custom.js"></script>

</div>

    </div>
  </div>
</div>

  </body>

</html>
