<!doctype html>
<html lang="en-us">

  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
    <title> Sed [2] - Exit Code In Sed - Dyrone Teng </title>
    <meta name="HandheldFriendly" content="True">
    <meta name="MobileOptimized" content="320">
    <meta name="referrer" content="no-referrer">
    <meta property="og:site_name" content="Dyrone Teng" />
    <meta property="og:locale" content="en_US" />

    <meta property="og:title" content="Sed [2] - Exit Code In Sed" />
<meta property="og:description" content="In this article, we will talk about the exit code when executing sed command.
Exit Code: 0 When the sed command executes successfully, the execution will exit as 0 which means the procedure is now as completion.
The result is the same whether the sed is matched or unmatched, the exit code only take the responsibility for the running correctness but not the matching logicalness. For an example:
➜ echo &#39;abc&#39; | sed -e &#39;s/d/e/1&#39; &lt;&lt;&lt; abc ➜ echo &#39;abc&#39; | sed -e &#39;s/b/e/1&#39; &lt;&lt;&lt; aec Exit Code: 1 Code 1 means you are executing an invalid command, invalid syntax, invalid regular expression or a GNU sed extension command used with --posix" />
<meta property="og:type" content="article" />
<meta property="og:url" content="/posts/sed-2-exit-code/" /><meta property="article:section" content="posts" />
<meta property="article:published_time" content="2022-07-03T17:00:04+08:00" />
<meta property="article:modified_time" content="2022-07-03T17:00:04+08:00" />



    <meta name="twitter:card" content="summary_large_image" />
    
    <meta name="twitter:title" content="Sed [2] - Exit Code In Sed" />
    <meta name="twitter:description" content="" />
    

    <meta name="twitter:image" content="" />
    <link rel="canonical" href="/posts/sed-2-exit-code/">
    
    <link rel="stylesheet" href="/css/site.min.css" />
    <link rel="stylesheet" href="css/custom.css" />

    
    
    <link href="/index.xml" rel="alternate" type="application/rss+xml" title="Dyrone Teng" />
    
  </head>

  <body>
    
<div class="mt-xl header">
  <header>
    <div class="container">
      <div class="row justify-content-center">
	<div class="col-auto">
	  <a href="" style="display: contents">
	    <h1 class="name text-center">Teng Long Is Dyrone</h1>
	  </a>
	</div>
      </div>
      <div class="row justify-content-center">
	<div class="nav justify-content-center">
	  <ul>
	    
	    <li class="nav-item justify-content-center mx-auto"> 
	      <a class="nav-link" href="/">
		
		Home
	      </a>
	    </li>
	    
	    <li class="nav-item justify-content-center mx-auto"> 
	      <a class="nav-link" href="/posts/introduce/index.html">
		
		About
	      </a>
	    </li>
	    
	    
	  </ul>
	</div>
      </div>
    </div>
  </header>
</div>

<div class="content">
  <div class="container">
    <div class="row justify-content-center">
      <div class="col-sm-12 col-lg-8">
        <h1 class="mx-0 mx-md-4 single-page-title">Sed [2] - Exit Code In Sed</h1>
        <div class="markdown page-content">
          <p>In this article, we will talk about the exit code when executing <strong>sed</strong> command.</p>
<h1 id="exit-code-0">Exit Code: 0</h1>
<p>When the sed command executes successfully, the execution will exit as <strong>0</strong> which means the procedure is now as completion.</p>
<p>The result is the same whether the sed is matched or unmatched, the exit code only take the responsibility for the running correctness but not the matching logicalness. For an example:</p>
<div class="highlight"><pre tabindex="0" style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-sh" data-lang="sh">➜   <span style="color:#204a87">echo</span> <span style="color:#4e9a06">&#39;abc&#39;</span> <span style="color:#000;font-weight:bold">|</span> sed -e <span style="color:#4e9a06">&#39;s/d/e/1&#39;</span>                                                         <span style="color:#ce5c00;font-weight:bold">&lt;&lt;&lt;</span>
abc
➜  <span style="color:#204a87">echo</span> <span style="color:#4e9a06">&#39;abc&#39;</span> <span style="color:#000;font-weight:bold">|</span> sed -e <span style="color:#4e9a06">&#39;s/b/e/1&#39;</span>                                                         <span style="color:#ce5c00;font-weight:bold">&lt;&lt;&lt;</span>
aec
</code></pre></div><h1 id="exit-code-1">Exit Code: 1</h1>
<p>Code 1 means you are executing an invalid command, invalid syntax, invalid regular expression or a GNU sed extension command used with <code>--posix</code></p>
<h2 id="invalid-command">invalid command</h2>
<p>For example, we specify an invalid option <code>-x</code>, the following execution will exit with code <strong>1</strong>:</p>
<div class="highlight"><pre tabindex="0" style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-sh" data-lang="sh">➜ <span style="color:#204a87">echo</span> <span style="color:#4e9a06">&#39;abc&#39;</span> <span style="color:#000;font-weight:bold">|</span> sed -x <span style="color:#4e9a06">&#39;s/b/e/1&#39;</span> <span style="color:#000;font-weight:bold">;</span> <span style="color:#204a87">echo</span>
sed: illegal option -- x
usage: sed script <span style="color:#ce5c00;font-weight:bold">[</span>-Ealn<span style="color:#ce5c00;font-weight:bold">]</span> <span style="color:#ce5c00;font-weight:bold">[</span>-i extension<span style="color:#ce5c00;font-weight:bold">]</span> <span style="color:#ce5c00;font-weight:bold">[</span>file ...<span style="color:#ce5c00;font-weight:bold">]</span>
       sed <span style="color:#ce5c00;font-weight:bold">[</span>-Ealn<span style="color:#ce5c00;font-weight:bold">]</span> <span style="color:#ce5c00;font-weight:bold">[</span>-i extension<span style="color:#ce5c00;font-weight:bold">]</span> <span style="color:#ce5c00;font-weight:bold">[</span>-e script<span style="color:#ce5c00;font-weight:bold">]</span> ... <span style="color:#ce5c00;font-weight:bold">[</span>-f script_file<span style="color:#ce5c00;font-weight:bold">]</span> ... <span style="color:#ce5c00;font-weight:bold">[</span>file ...<span style="color:#ce5c00;font-weight:bold">]</span>
<span style="color:#0000cf;font-weight:bold">1</span>
</code></pre></div><h2 id="invalid-syntax">invalid syntax</h2>
<p>For example, we specify an invalid substitute flag, the following execution will exit with code <strong>1</strong>:</p>
<div class="highlight"><pre tabindex="0" style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-sh" data-lang="sh">➜  posts git:<span style="color:#ce5c00;font-weight:bold">(</span>master<span style="color:#ce5c00;font-weight:bold">)</span> ✗ <span style="color:#204a87">echo</span> <span style="color:#4e9a06">&#39;abc&#39;</span> <span style="color:#000;font-weight:bold">|</span> sed -e <span style="color:#4e9a06">&#39;s/b/e/1/&#39;</span> <span style="color:#000;font-weight:bold">;</span> <span style="color:#204a87">echo</span> <span style="color:#000">$?</span> 
sed: 1: <span style="color:#4e9a06">&#34;s/b/e/1/
</span><span style="color:#4e9a06">&#34;</span>: bad flag in substitute command: <span style="color:#4e9a06">&#39;/&#39;</span>
<span style="color:#0000cf;font-weight:bold">1</span>
</code></pre></div><h2 id="invalid-regular-expression">invalid regular expression</h2>
<p>For example, by default the regular expression of sed is not allowd yo be empty, so the following execution will exit with code <strong>1</strong>:</p>
<div class="highlight"><pre tabindex="0" style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-sh" data-lang="sh">➜  posts git:<span style="color:#ce5c00;font-weight:bold">(</span>master<span style="color:#ce5c00;font-weight:bold">)</span> ✗ <span style="color:#204a87">echo</span> <span style="color:#4e9a06">&#39;abc&#39;</span> <span style="color:#000;font-weight:bold">|</span> sed -e <span style="color:#4e9a06">&#39;s//replacement/1&#39;</span> <span style="color:#000;font-weight:bold">;</span> <span style="color:#204a87">echo</span> <span style="color:#000">$?</span>                                 sed: first RE may not be empty
<span style="color:#0000cf;font-weight:bold">1</span>
</code></pre></div><h1 id="exit-code-2">Exit Code: 2</h1>
<h2 id="input-file-could-not-be-opened">input file could not be opened</h2>
<p>e.g. if a file is not found, or read permission is denied,</p>
<p>For example, we specify an unexist input file which named <strong>input.txt</strong>, and the execution result is:</p>
<div class="highlight"><pre tabindex="0" style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-sh" data-lang="sh"><span style="color:#8f5902;font-style:italic"># sed &#39;s/1/2/g&#39; input.txt</span>
sed: can<span style="color:#a40000">&#39;</span>t <span style="color:#204a87">read</span> input.txt: No such file or directory
<span style="color:#8f5902;font-style:italic"># echo $?</span>
<span style="color:#0000cf;font-weight:bold">2</span>
<span style="color:#8f5902;font-style:italic"># uname -a</span>
Linux 94cb2f1a7253 4.19.76-linuxkit <span style="color:#8f5902;font-style:italic">#1 SMP Tue May 26 11:42:35 UTC 2020 x86_64 x86_64 x86_64 GNU/Linux</span>
</code></pre></div><p>Unfortunately, the result is different if I execute the same command on my Mac, the result will be like:</p>
<div class="highlight"><pre tabindex="0" style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-sh" data-lang="sh">➜  /tmp sed <span style="color:#4e9a06">&#39;s/1/2/g&#39;</span> input.txt <span style="color:#000;font-weight:bold">;</span> <span style="color:#204a87">echo</span> <span style="color:#000">$?</span>
sed: input.txt: No such file or directory
<span style="color:#0000cf;font-weight:bold">1</span>

➜  /tmp sed <span style="color:#4e9a06">&#39;1p&#39;</span> unexist.file <span style="color:#000;font-weight:bold">;</span> <span style="color:#204a87">echo</span> <span style="color:#000">$?</span>
sed: unexist.file: No such file or directory
<span style="color:#0000cf;font-weight:bold">1</span>
</code></pre></div><p>But why and what happended to the Mac-sed? This is because the <strong>sed</strong> on Mac is not a GNU sed, and so on, Mac doesn&rsquo;t support the GNU extension too. The detailed information I will write on the following article.``</p>
<h1 id="exit-code-4">Exit Code: 4</h1>
<p>When An I/O error occured, or a serious <strong>processing</strong> error during runtime, GNU sed will be aborted immediately with <strong>4</strong>.</p>
<h1 id="custom-exit-code">Custom Exit Code</h1>
<p>This is a GNU sed extension, <strong>q</strong> and <strong>Q</strong> can be used to terminate <strong>sed</strong> with a custom exit code value.</p>
<div class="highlight"><pre tabindex="0" style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-sh" data-lang="sh">$ <span style="color:#204a87">echo</span> <span style="color:#4e9a06">&#39;abc&#39;</span> <span style="color:#000;font-weight:bold">|</span> sed -e <span style="color:#4e9a06">&#39;q42&#39;</span> -e <span style="color:#4e9a06">&#39;s/a/A/g&#39;</span> <span style="color:#000;font-weight:bold">;</span> <span style="color:#204a87">echo</span> <span style="color:#000">$?</span>
abc
<span style="color:#0000cf;font-weight:bold">42</span>
</code></pre></div><p>And then, as the tips before, If I execute is on my Mac, the <code>q</code> can not be recognized by <strong>sed</strong> and will return the <strong>1</strong> as exit code.</p>


        </div>
      </div>
      <div class="container">
  <span class="row justify-content-center meta" id="footer">
    Copyright © 2023 Dyrone Teng
  </span>
  <script defer src="js/custom.js"></script>

</div>

    </div>
  </div>
</div>

  </body>

</html>
